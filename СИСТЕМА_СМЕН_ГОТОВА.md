# ‚úÖ –°–ò–°–¢–ï–ú–ê –°–ú–ï–ù –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–ê

## üéØ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ó–ê–î–ê–ß–ò

### ‚úÖ 1. –°–æ–∑–¥–∞–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω
- **–§–∞–π–ª:** `src/lib/dynamic-shift-utils.ts`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** –†–∞–±–æ—Ç–∞ —Å–æ —Å–º–µ–Ω–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–∑ –ë–î
- **–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
  - `getShiftTypeByTimeFromDB()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–º–µ–Ω—ã –∏–∑ –ë–î
  - `isTimeInShift()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ —Å–º–µ–Ω—É
  - `getActiveShiftSettings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - `getAllShiftsSchedule()` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è UI

### ‚úÖ 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã API endpoints
- **API –≤—Ä–µ–º–µ–Ω–∏:** `/api/time-check` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏ —Å—Ç–∞—Ç–∏—á–Ω—É—é, –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –ª–æ–≥–∏–∫—É
- **API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:** `/api/manager/stats-detailed` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **API –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–º–µ–Ω:** `/api/manager/available-shifts` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–º–µ–Ω —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–æ—á–Ω–∞—è —Å–º–µ–Ω–∞ (–±—ã–ª–æ 22:00-30:00, —Å—Ç–∞–ª–æ 22:00-06:00)
- **–õ–æ–≥–∏–∫–∞:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ–Ω —Ç–∏–ø–∞ 22:00-06:00
- **–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:** –í—Å–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚úÖ 4. –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### üß™ –¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
```
‚úÖ API –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–º–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç  
‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (0.00–º—Å –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
```

#### üß™ –¢–µ—Å—Ç –≥–∏–±–∫–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
```
‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ª–µ—Ç–Ω–µ–µ –≤—Ä–µ–º—è (—Å–º–µ—â–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–º–µ–Ω –Ω–∞ +1—á)
‚úÖ –ö–æ—Ä–æ—Ç–∫–∞—è –ø—è—Ç–Ω–∏—Ü–∞ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–º–µ–Ω—ã)
‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è API –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤ –ë–î
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```

## üõ†Ô∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
1. `src/lib/dynamic-shift-utils.ts` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–º–µ–Ω
2. `src/lib/system-time.ts` - –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ä–µ–º–µ–Ω–∏ (—É–∂–µ –±—ã–ª)

### üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
1. `src/app/api/time-check/route.ts` - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
2. `src/app/api/manager/stats-detailed/route.ts` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
3. `src/app/api/manager/available-shifts/route.ts` - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–º–µ–Ω—ã
4. `src/lib/shift-manager.ts` - –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–º–µ–Ω
5. `src/lib/shift-auto-closer.ts` - –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚è∞ –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è: 15:56 UTC
### üéØ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞: DAY (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### üìã –ê–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
- **MORNING:** 06:00 - 14:00
- **DAY:** 14:00 - 22:00  
- **NIGHT:** 22:00 - 06:00 (+1 –¥–µ–Ω—å)

### üî¨ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (–≤—Å–µ ‚úÖ):
- 05:59 ‚Üí NIGHT
- 06:00 ‚Üí MORNING  
- 13:59 ‚Üí MORNING
- 14:00 ‚Üí DAY
- 21:59 ‚Üí DAY
- 22:00 ‚Üí NIGHT
- 23:30 ‚Üí NIGHT
- 00:30 ‚Üí NIGHT
- 03:00 ‚Üí NIGHT

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

### ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç:
- –ò–∑–º–µ–Ω—è—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è –ª—é–±–æ–π —Å–º–µ–Ω—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- –î–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–º–µ–Ω (–ø–æ—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Prisma —Å—Ö–µ–º—ã)
- –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–º–µ–Ω—ã
- –í–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ë–î –≤–æ –≤—Å–µ—Ö API
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–º–µ–Ω—ã —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤ UI
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é —Å–º–µ–Ω—É –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–º–µ–Ω—ã: **0.00–º—Å**
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: **–û–¢–õ–ò–ß–ù–ê–Ø**
- –ë–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –∑–∞–¥–µ—Ä–∂–µ–∫

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- Fallback –∫ —Å—Ç–∞—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

## üéØ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

1. **–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–º–µ–Ω:**
   - –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–º–µ–Ω
   - –ò–∑–º–µ–Ω–∏—Ç—å startHour/endHour –¥–ª—è –Ω—É–∂–Ω–æ–π —Å–º–µ–Ω—ã
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

2. **–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å–º–µ–Ω:**
   - –û–±–Ω–æ–≤–∏—Ç—å `enum ShiftType` –≤ `prisma/schema.prisma`
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `npx prisma db push`
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É `shift_settings`

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:**
   - GET `/api/time-check` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `currentShift`, `dynamicShift`, `shiftSchedule`

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°–∏—Å—Ç–µ–º–∞ —Å–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!**

- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –í—Ä–µ–º—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–ª–∏—á–Ω–∞—è
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ

**–ú–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –≤—Ä–µ–º—è —Å–º–µ–Ω - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è!**
