# üöÄ –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–î–∞—Ç–∞:** 15 —Å–µ–Ω—Ç—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û  
**–°–µ—Ä–≤–µ—Ä:** http://localhost:3000

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ Next.js
- **–ü—Ä–æ–±–ª–µ–º–∞:** `Cannot find module './5611.js'`
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –∫–µ—à —Å–±–æ—Ä–∫–∏ `.next`
- **–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–ø–∫–∏ `.next` –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. –û—à–∏–±–∫–∏ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è Prisma
- **–ü—Ä–æ–±–ª–µ–º–∞:** `Environment variable not found: DIRECT_URL`
- **–ü—Ä–∏—á–∏–Ω–∞:** Prisma –Ω–µ –≤–∏–¥–µ–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.local` –∏–∑-–∑–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Å—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ `.env` –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–æ–ª–∏ –≤ –±–∞–∑–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–º
- **–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –¥–ª—è `test-processor@example.com` –∏ `admin@umbra-platform.dev`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–¢–µ—Å—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:**
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test-processor@example.com","password":"password123"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```json
{
  "message": "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ",
  "user": {
    "id": "3c0a1216-d2a2-48a5-b165-1b8881248634",
    "email": "test-processor@example.com",
    "name": "–¢–µ—Å—Ç–æ–≤—ã–π –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä",
    "role": "PROCESSOR"
  }
}
```

**–¢–µ—Å—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@umbra-platform.dev","password":"password123"}'
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```json
{
  "message": "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ",
  "user": {
    "id": "056944a7-805e-46c7-b36a-a2cef865fcc5",
    "email": "admin@umbra-platform.dev",
    "name": "Administrator",
    "role": "ADMIN"
  }
}
```

---

### ‚úÖ API –ª–æ–≥–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/processor/action-logs`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

```json
{
  "logs": [
    {
      "id": "39bde212-2751-429c-8162-8b6bb0794218",
      "userId": "3c0a1216-d2a2-48a5-b165-1b8881248634",
      "action": "SHIFT_SHIFT_END",
      "metadata": "{\"action\":\"SHIFT_END\",\"description\":\"–¢–µ—Å—Ç–æ–≤—ã–π: –ó–∞–≤–µ—Ä—à–∏–ª —É—Ç—Ä–µ–Ω–Ω—é—é —Å–º–µ–Ω—É (–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 477 –º–∏–Ω)\",\"shiftType\":\"MORNING\",\"duration\":28620000,\"autoEnded\":false}",
      "createdAt": "2025-09-14T11:02:00.000Z"
    }
    // ... –µ—â–µ 2 –ª–æ–≥–∞
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 3,
    "pages": 1
  }
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏:** ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ 3 –ª–æ–≥–∞

---

### ‚úÖ API –ª–æ–≥–æ–≤ —Å–º–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/admin/shift-logs`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–º–µ–Ω—ã –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

```json
{
  "shifts": [
    {
      "id": "1fa19a7e-f4a5-4d6a-a237-cf5256e3e2a1",
      "processorId": "3c0a1216-d2a2-48a5-b165-1b8881248634",
      "shiftType": "MORNING",
      "status": "COMPLETED",
      "processor": {
        "name": "–¢–µ—Å—Ç–æ–≤—ã–π –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä",
        "email": "test-processor@example.com",
        "telegram": "@test_processor"
      }
    }
    // ... –µ—â–µ 1 —Å–º–µ–Ω–∞
  ],
  "stats": {
    "total": 2,
    "scheduled": 0,
    "active": 0,
    "completed": 1,
    "missed": 1
  }
}
```

---

### ‚úÖ API –ª–æ–≥–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/admin/action-logs`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤

```json
{
  "logs": [
    {
      "id": "39bde212-2751-429c-8162-8b6bb0794218",
      "userId": "3c0a1216-d2a2-48a5-b165-1b8881248634",
      "action": "SHIFT_SHIFT_END",
      "user": {
        "name": "–¢–µ—Å—Ç–æ–≤—ã–π –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä",
        "email": "test-processor@example.com",
        "telegram": "@test_processor"
      }
    }
    // ... –µ—â–µ 2 –ª–æ–≥–∞
  ],
  "stats": {
    "total": 3,
    "shiftStart": 2,
    "shiftEnd": 1
  }
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã:** ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç –≤—Å–µ 3 –ª–æ–≥–∞ —Å–∏—Å—Ç–µ–º—ã

---

## üõ°Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –≤–∏–¥–∏—Ç:** 3 —Å–≤–æ–∏—Ö –ª–æ–≥–∞
- ‚úÖ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–∏–¥–∏—Ç:** 3 –ª–æ–≥–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:** –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä ‚â§ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ API –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω —Ä–æ–ª–∏ `PROCESSOR`
- ‚úÖ API –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω —Ä–æ–ª–∏ `ADMIN`
- ‚úÖ –ü–µ—Ä–µ–∫—Ä–µ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä: `WHERE userId = currentUser.id`
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: `WHERE action LIKE 'SHIFT_%'` (–≤—Å–µ –∑–∞–ø–∏—Å–∏)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|---------|----------|
| üåê –°–µ—Ä–≤–µ—Ä Next.js | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | http://localhost:3000 |
| üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ | PostgreSQL –Ω–∞ localhost:5432 |
| üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | JWT —Ç–æ–∫–µ–Ω—ã, —Ä–æ–ª–∏ |
| üìù API –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –¢–æ–ª—å–∫–æ —Å–≤–æ–∏ –ª–æ–≥–∏ |
| üîß API –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –í—Å–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã |
| üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ | –ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |
| üì± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | ‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω | –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é |

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:

1. **–°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—É—â–µ–Ω** –Ω–∞ http://localhost:3000
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã** –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
4. **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç** –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç** —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞** –Ω–∞ —É—Ä–æ–≤–Ω–µ API

### üîë –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:

- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:** `test-processor@example.com` / `password123`
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:** `admin@umbra-platform.dev` / `password123`

### üåê –°—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- **–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä:** http://localhost:3000/processing
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:** http://localhost:3000/admin/processing

---

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

üéâ **–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ª–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ —Å–º–µ–Ω–∞–º
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –ª–æ–≥–∏ —Å–º–µ–Ω –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  
- ‚úÖ API —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –ì–û–¢–û–í –ö –≠–ö–°–ü–õ–£–ê–¢–ê–¶–ò–ò ‚úÖ

---

*–û—Ç—á–µ—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º live-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.*
